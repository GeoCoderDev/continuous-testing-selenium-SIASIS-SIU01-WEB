<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>üöÄ SIASIS - Dashboard de Reportes de Testing</title>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        min-height: 100vh;
        overflow-x: hidden;
      }

      .stars {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        pointer-events: none;
        z-index: 1;
      }

      .star {
        position: absolute;
        width: 2px;
        height: 2px;
        background: white;
        border-radius: 50%;
        animation: twinkle 3s infinite;
      }

      @keyframes twinkle {
        0%,
        100% {
          opacity: 0.3;
        }
        50% {
          opacity: 1;
        }
      }

      .container {
        position: relative;
        z-index: 10;
        max-width: 1400px;
        margin: 0 auto;
        padding: 15px 20px;
        min-height: 100vh;
      }

      .header {
        text-align: center;
        color: white;
        margin-bottom: 15px;
        animation: slideDown 0.8s ease-out;
      }

      @keyframes slideDown {
        from {
          transform: translateY(-20px);
          opacity: 0;
        }
        to {
          transform: translateY(0);
          opacity: 1;
        }
      }

      .header h1 {
        font-size: 2rem;
        margin-bottom: 4px;
        text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.3);
        background: linear-gradient(45deg, #fff, #f0f8ff, #e6f3ff);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
      }

      .header p {
        font-size: 0.9rem;
        opacity: 0.9;
        margin-bottom: 3px;
      }

      .timestamp {
        font-size: 0.8rem;
        opacity: 0.8;
        margin-bottom: 10px;
      }

      .environment-detector {
        background: rgba(255, 255, 255, 0.1);
        backdrop-filter: blur(10px);
        border-radius: 10px;
        padding: 15px;
        margin-bottom: 20px;
        border: 1px solid rgba(255, 255, 255, 0.2);
        animation: fadeIn 1.5s ease-out;
      }

      @keyframes fadeIn {
        from {
          opacity: 0;
          transform: translateY(15px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      .environment-status {
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 10px;
        color: white;
        font-size: 1rem;
        margin-bottom: 10px;
      }

      .env-badge {
        padding: 6px 15px;
        border-radius: 20px;
        font-weight: bold;
        text-transform: uppercase;
        letter-spacing: 1px;
        font-size: 0.85rem;
        animation: pulse 2s infinite;
      }

      .env-dev {
        background: linear-gradient(45deg, #4caf50, #45a049);
      }
      .env-cert {
        background: linear-gradient(45deg, #ff9800, #f57c00);
      }
      .env-current {
        background: linear-gradient(45deg, #2196f3, #1976d2);
      }

      @keyframes pulse {
        0%,
        100% {
          transform: scale(1);
        }
        50% {
          transform: scale(1.05);
        }
      }

      .reports-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
        gap: 12px;
        margin-bottom: 20px;
        max-width: 1200px;
        margin-left: auto;
        margin-right: auto;
        padding: 0 10px;
      }

      /* Forzar al menos 2 columnas en pantallas medianas */
      @media (min-width: 600px) and (max-width: 1000px) {
        .reports-grid {
          grid-template-columns: repeat(2, 1fr);
          gap: 15px;
        }
      }

      /* Forzar 4 columnas en pantallas grandes */
      @media (min-width: 1000px) {
        .reports-grid {
          grid-template-columns: repeat(4, 1fr);
          gap: 15px;
        }
      }

      .report-card {
        background: rgba(255, 255, 255, 0.95);
        border-radius: 12px;
        padding: 15px;
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
        transition: all 0.3s ease;
        border: 1px solid rgba(255, 255, 255, 0.2);
        position: relative;
        overflow: hidden;
        animation: slideUp 0.8s ease-out forwards;
        opacity: 0;
        height: auto;
        min-height: 200px;
        display: flex;
        flex-direction: column;
      }

      .report-card:nth-child(1) {
        animation-delay: 0.1s;
      }
      .report-card:nth-child(2) {
        animation-delay: 0.2s;
      }
      .report-card:nth-child(3) {
        animation-delay: 0.3s;
      }
      .report-card:nth-child(4) {
        animation-delay: 0.4s;
      }

      @keyframes slideUp {
        from {
          transform: translateY(20px);
          opacity: 0;
        }
        to {
          transform: translateY(0);
          opacity: 1;
        }
      }

      .report-card:hover {
        transform: translateY(-3px) scale(1.01);
        box-shadow: 0 8px 30px rgba(0, 0, 0, 0.15);
      }

      .report-card::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 4px;
        background: linear-gradient(90deg, #667eea, #764ba2);
      }

      .report-header {
        display: flex;
        align-items: center;
        gap: 12px;
        margin-bottom: 15px;
      }

      .report-icon {
        font-size: 2rem;
        width: 50px;
        height: 50px;
        display: flex;
        align-items: center;
        justify-content: center;
        border-radius: 12px;
        background: linear-gradient(135deg, #667eea, #764ba2);
        color: white;
        text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.2);
      }

      .report-title {
        font-size: 1.1rem;
        font-weight: bold;
        color: #2c3e50;
        margin-bottom: 3px;
      }

      .report-description {
        color: #7f8c8d;
        font-size: 0.8rem;
      }

      .report-links {
        display: flex;
        flex-direction: column;
        gap: 10px;
      }

      .report-link {
        display: flex;
        align-items: center;
        gap: 10px;
        padding: 12px 15px;
        background: linear-gradient(135deg, #f8f9fa, #e9ecef);
        border-radius: 10px;
        text-decoration: none;
        color: #495057;
        transition: all 0.3s ease;
        border: 1px solid #dee2e6;
      }

      .report-link:hover {
        background: linear-gradient(135deg, #667eea, #764ba2);
        color: white;
        transform: translateX(2px);
        box-shadow: 0 2px 8px rgba(102, 126, 234, 0.3);
      }

      .link-icon {
        font-size: 1.2rem;
        width: 25px;
      }

      .environment-selector {
        display: flex;
        justify-content: center;
        gap: 8px;
        margin-bottom: 15px;
      }

      .env-button {
        padding: 8px 16px;
        border: none;
        border-radius: 20px;
        background: rgba(255, 255, 255, 0.2);
        color: white;
        cursor: pointer;
        transition: all 0.3s ease;
        font-weight: bold;
        font-size: 0.85rem;
      }

      .env-button:hover {
        background: rgba(255, 255, 255, 0.3);
        transform: scale(1.05);
      }

      .env-button.active {
        background: linear-gradient(45deg, #4caf50, #45a049);
        box-shadow: 0 4px 15px rgba(76, 175, 80, 0.3);
      }

      .footer {
        text-align: center;
        color: rgba(255, 255, 255, 0.8);
        margin-top: 20px;
        padding: 12px 15px;
        border-top: 1px solid rgba(255, 255, 255, 0.1);
        font-size: 0.75rem;
        line-height: 1.4;
      }

      .footer p {
        margin-bottom: 2px;
      }

      .refresh-btn {
        position: fixed;
        bottom: 15px;
        right: 15px;
        width: 40px;
        height: 40px;
        border-radius: 50%;
        background: linear-gradient(135deg, #667eea, #764ba2);
        color: white;
        border: none;
        font-size: 1.1rem;
        cursor: pointer;
        box-shadow: 0 3px 12px rgba(0, 0, 0, 0.3);
        transition: all 0.3s ease;
        z-index: 1000;
      }

      .refresh-btn:hover {
        transform: scale(1.05) rotate(180deg);
        box-shadow: 0 4px 18px rgba(0, 0, 0, 0.4);
      }

      @media (max-width: 768px) {
        .header h1 {
          font-size: 1.6rem;
        }
        .reports-grid {
          grid-template-columns: 1fr;
          gap: 10px;
          padding: 0 5px;
        }
        .container {
          padding: 10px 15px;
        }
        .report-card {
          padding: 12px;
          min-height: 180px;
        }
        .environment-detector {
          padding: 8px;
        }
        .report-title {
          font-size: 0.9rem;
        }
        .report-description {
          font-size: 0.7rem;
        }
        .report-link {
          padding: 7px 8px;
          font-size: 0.8rem;
        }
        .footer {
          font-size: 0.7rem;
          padding: 8px;
          margin-top: 15px;
        }
        .refresh-btn {
          width: 40px;
          height: 40px;
          font-size: 1.1rem;
          bottom: 15px;
          right: 15px;
        }
      }

      /* Para pantallas muy peque√±as verticalmente */
      @media (max-height: 600px) {
        .header {
          margin-bottom: 10px;
        }
        .header h1 {
          font-size: 1.5rem;
          margin-bottom: 3px;
        }
        .header p {
          font-size: 0.8rem;
          margin-bottom: 2px;
        }
        .timestamp {
          font-size: 0.7rem;
          margin-bottom: 6px;
        }
        .environment-detector {
          padding: 8px;
          margin-bottom: 10px;
        }
        .reports-grid {
          gap: 8px;
          margin-bottom: 12px;
        }
        .report-card {
          padding: 10px;
          min-height: 160px;
        }
        .footer {
          margin-top: 10px;
          padding: 6px;
        }
        .container {
          padding: 8px 12px;
        }
      }
    </style>
  </head>
  <body>
    <div class="stars" id="stars"></div>

    <div class="container">
      <header class="header">
        <h1>üöÄ SIASIS Testing Dashboard</h1>
        <p>Sistema de Control de Asistencia - I.E. 20935 Asunci√≥n 8</p>
        <p>üìä Portal de Reportes de Testing Automatizado</p>
        <div class="timestamp">
          üìÖ √öltimo reporte generado: <span id="timestamp"></span>
        </div>
      </header>

      <div class="environment-detector">
        <div class="environment-status">
          <span>üåç Entorno Actual:</span>
          <span id="environmentBadge" class="env-badge env-current"
            >AMBIENTE DETECTADO</span
          >
        </div>

        <div class="environment-selector">
          <button
            class="env-button"
            onclick="switchEnvironment('dev')"
            id="btnDev"
          >
            üõ†Ô∏è Desarrollo
          </button>
          <button
            class="env-button"
            onclick="switchEnvironment('cert')"
            id="btnCert"
          >
            üéØ Certificaci√≥n
          </button>
        </div>
      </div>

      <div class="reports-grid">
        <!-- Cucumber Reports -->
        <div class="report-card">
          <div class="report-header">
            <div class="report-icon">ü•í</div>
            <div>
              <div class="report-title">Reportes de Cucumber</div>
              <div class="report-description">
                Reportes de caracter√≠sticas y escenarios BDD
              </div>
            </div>
          </div>
          <div class="report-links">
            <a href="#" class="report-link" id="cucumberMain">
              <span class="link-icon">üìã</span>
              <span>Reporte Principal</span>
            </a>
            <a href="#" class="report-link" id="cucumberHtml">
              <span class="link-icon">üìà</span>
              <span>HTML Reports</span>
            </a>
          </div>
        </div>

        <!-- Surefire Reports -->
        <div class="report-card">
          <div class="report-header">
            <div class="report-icon">üß™</div>
            <div>
              <div class="report-title">Reportes de Surefire</div>
              <div class="report-description">
                Reportes de ejecuci√≥n de tests JUnit
              </div>
            </div>
          </div>
          <div class="report-links">
            <a href="#" class="report-link" id="surefireReports">
              <span class="link-icon">üìÑ</span>
              <span>Reportes XML/TXT</span>
            </a>
          </div>
        </div>

        <!-- Metadatos -->
        <div class="report-card">
          <div class="report-header">
            <div class="report-icon">üì¶</div>
            <div>
              <div class="report-title">Metadatos</div>
              <div class="report-description">
                Informaci√≥n de ejecuci√≥n y configuraci√≥n
              </div>
            </div>
          </div>
          <div class="report-links">
            <a href="#" class="report-link" id="testMetadata">
              <span class="link-icon">‚ÑπÔ∏è</span>
              <span>Test Metadata</span>
            </a>
          </div>
        </div>

        <!-- Utilidades -->
        <div class="report-card">
          <div class="report-header">
            <div class="report-icon">‚öôÔ∏è</div>
            <div>
              <div class="report-title">Utilidades</div>
              <div class="report-description">
                Herramientas y comandos √∫tiles
              </div>
            </div>
          </div>
          <div class="report-links">
            <a href="#" class="report-link" onclick="showCommands()">
              <span class="link-icon">üíª</span>
              <span>Comandos Maven</span>
            </a>
            <a href="#" class="report-link" onclick="showHelp()">
              <span class="link-icon">‚ùì</span>
              <span>Ayuda</span>
            </a>
          </div>
        </div>
      </div>

      <footer class="footer">
        <p>üè´ I.E. 20935 Asunci√≥n 8 - Imperial, Ca√±ete</p>
        <p>üîß Sistema de Testing Automatizado con Selenium + Cucumber</p>
        <p style="font-size: 0.6rem">
          üöÄ DEV:
          <code style="font-size: 0.6rem"
            >$env:ENTORNO="D"; mvn clean verify</code
          >
          | CERT:
          <code style="font-size: 0.6rem"
            >$env:ENTORNO="C"; mvn clean verify</code
          >
        </p>
      </footer>
    </div>

    <button
      class="refresh-btn"
      onclick="updateTimestamp()"
      title="Actualizar timestamp"
    >
      üîÑ
    </button>

    <script>
      let currentEnvironment = "dev"; // Por defecto

      // Crear estrellas animadas (menos en pantallas peque√±as)
      function createStars() {
        const starsContainer = document.getElementById("stars");
        const starCount =
          window.innerWidth < 768 ? 30 : window.innerHeight < 600 ? 20 : 100;

        for (let i = 0; i < starCount; i++) {
          const star = document.createElement("div");
          star.className = "star";
          star.style.left = Math.random() * 100 + "%";
          star.style.top = Math.random() * 100 + "%";
          star.style.animationDelay = Math.random() * 3 + "s";
          starsContainer.appendChild(star);
        }
      }

      // Cambiar entorno
      function switchEnvironment(env) {
        currentEnvironment = env;

        // Actualizar botones
        document.querySelectorAll(".env-button").forEach((btn) => {
          btn.classList.remove("active");
        });
        document
          .getElementById("btn" + env.charAt(0).toUpperCase() + env.slice(1))
          .classList.add("active");

        // Actualizar badge
        const badge = document.getElementById("environmentBadge");
        badge.textContent =
          env === "dev" ? "DESARROLLO üõ†Ô∏è" : "CERTIFICACI√ìN üéØ";
        badge.className = "env-badge env-" + env;

        // Actualizar enlaces
        updateLinks();
      }

      // Actualizar enlaces seg√∫n el entorno
      function updateLinks() {
        const basePath = `reports/${currentEnvironment}/`;

        document.getElementById("cucumberMain").href =
          basePath + "cucumber-reports/index.html";
        document.getElementById("cucumberHtml").href =
          basePath + "cucumber-html-reports/";
        document.getElementById("surefireReports").href =
          basePath + "surefire-reports/";
        document.getElementById("testMetadata").href =
          basePath + "test-metadata.txt";
      }

      // Actualizar timestamp
      function updateTimestamp() {
        const timestamp = document.getElementById("timestamp");
        const now = new Date();
        timestamp.textContent = now.toLocaleString("es-ES", {
          year: "numeric",
          month: "2-digit",
          day: "2-digit",
          hour: "2-digit",
          minute: "2-digit",
          second: "2-digit",
        });

        // Efecto de rotaci√≥n en el bot√≥n
        const btn = document.querySelector(".refresh-btn");
        btn.style.transform = "scale(1.1) rotate(360deg)";
        setTimeout(() => {
          btn.style.transform = "scale(1) rotate(0deg)";
        }, 1000);
      }

      // Mostrar comandos
      function showCommands() {
        const commands = `
üöÄ COMANDOS MAVEN PARA SIASIS

üìä EJECUTAR TESTS:
‚Ä¢ Desarrollo:     $env:ENTORNO="D"; mvn clean verify
‚Ä¢ Certificaci√≥n:  $env:ENTORNO="C"; mvn clean verify
‚Ä¢ Solo tests:     mvn test
‚Ä¢ Limpiar:        mvn clean

üîß REPORTES:
‚Ä¢ Los reportes se generan autom√°ticamente en reports/dev/ o reports/cert/
‚Ä¢ Cucumber HTML: cucumber-reports/index.html
‚Ä¢ Surefire: surefire-reports/
‚Ä¢ Metadatos: test-metadata.txt

üí° TIPS:
‚Ä¢ Usa diferentes entornos para comparar resultados
‚Ä¢ Los reportes se mantienen separados por entorno
‚Ä¢ Revisa test-metadata.txt para detalles de ejecuci√≥n
            `;
        alert(commands);
      }

      // Mostrar ayuda
      function showHelp() {
        const help = `
üéØ SIASIS TESTING DASHBOARD - AYUDA

üìã NAVEGACI√ìN:
‚Ä¢ Usa los botones Desarrollo/Certificaci√≥n para cambiar entorno
‚Ä¢ Cada entorno mantiene sus propios reportes
‚Ä¢ Los enlaces se actualizan autom√°ticamente

üìä TIPOS DE REPORTES:
‚Ä¢ Cucumber: Reportes BDD con escenarios detallados
‚Ä¢ Surefire: Reportes JUnit con resultados de tests
‚Ä¢ Metadatos: Informaci√≥n de configuraci√≥n y ejecuci√≥n

üîÑ ACTUALIZACI√ìN:
‚Ä¢ El bot√≥n üîÑ actualiza el timestamp
‚Ä¢ Los reportes se regeneran al ejecutar mvn clean verify
‚Ä¢ Cada entorno (DEV/CERT) tiene reportes independientes

‚ö° ESTRUCTURA:
reports/
‚îú‚îÄ‚îÄ dev/     (ENTORNO="D")
‚îÇ   ‚îú‚îÄ‚îÄ cucumber-reports/
‚îÇ   ‚îú‚îÄ‚îÄ surefire-reports/
‚îÇ   ‚îî‚îÄ‚îÄ test-metadata.txt
‚îî‚îÄ‚îÄ cert/    (ENTORNO="C")
    ‚îú‚îÄ‚îÄ cucumber-reports/
    ‚îú‚îÄ‚îÄ surefire-reports/
    ‚îî‚îÄ‚îÄ test-metadata.txt

üí° ¬øPROBLEMAS?
‚Ä¢ Verifica que hayas ejecutado mvn clean verify
‚Ä¢ Aseg√∫rate de estar en el directorio correcto
‚Ä¢ Comprueba que la variable ENTORNO est√© configurada
            `;
        alert(help);
      }

      // Inicializaci√≥n
      document.addEventListener("DOMContentLoaded", function () {
        createStars();
        updateTimestamp();
        switchEnvironment("dev"); // Empezar con desarrollo
      });

      // Auto-actualizar timestamp cada minuto
      setInterval(updateTimestamp, 60000);
    </script>
  </body>
</html>
